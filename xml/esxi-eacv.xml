<?xml version="1.0" encoding="utf-8"?>
<config>
    <global>
        <logfileRootDir>TestResults</logfileRootDir>
        <defaultSnapshot>ICABase</defaultSnapshot>
        <email>
            <recipients>
                <to>myboss@mycompany.com</to>
                <to>myself@mycompany.com</to>
            </recipients>
            <sender>myself@mycompany.com</sender>
            <subject>ESX Automation Test</subject>
            <smtpServer>mysmtphost.mycompany.com</smtpServer>
        </email>
    </global>

    <testSuites>
        <suite>
            <suiteName>eacv</suiteName>
            <suiteTests>
                <suiteTest>ovt_snapshot_container</suiteTest>

                <suiteTest>stor_add_ide_disk</suiteTest>

                <suiteTest>bl_add_memory_under_stress</suiteTest>
                <suiteTest>bl_add_memory_low_to_high</suiteTest>
                <suiteTest>bl_no_vmmemctl_process</suiteTest>

                <suiteTest>nw_check_lro_status_ethtool</suiteTest>
                <suiteTest>stor_cp_big_files</suiteTest>

            </suiteTests>
        </suite>
    </testSuites>

    <testCases>

        <test>
            <testName>stor_cp_big_files</testName>
            <testID>ESX-OVT-033</testID>
            <setupScript>setupscripts\add_hard_disk.ps1</setupScript>
            <testScript>stor_cp_big_files.sh</testScript>
            <files>remote-scripts/utils.sh</files>
            <files>remote-scripts/stor_cp_big_files.sh</files>
            <testParams>
                <param>DiskType=IDE</param>
                <param>StorageFormat=Thin</param>
                <param>CapacityGB=10</param>
                <param>nfs=10.73.194.25:/vol/s13rd/public</param>
                <param>TC_COVERED=RHEL634923-,RHEL7-50899</param>
            </testParams>
            <cleanupScript>SetupScripts\remove_hard_disk.ps1</cleanupScript>
            <RevertDefaultSnapshot>True</RevertDefaultSnapshot>
            <timeout>1200</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
        </test>

        <test>
            <testName>nw_check_lro_status_ethtool</testName>
            <testID>ESX-NW-018</testID>
            <setupScript>
                <file>SetupScripts\change_cpu.ps1</file>
            </setupScript>
            <testScript>testscripts\nw_check_lro_status_ethtool.ps1</testScript>
            <testParams>
                <param>VCPU=1</param>
                <param>TC_COVERED=RHEL7-50919</param>
            </testParams>
            <RevertDefaultSnapshot>True</RevertDefaultSnapshot>
            <timeout>400</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
        </test>

        <test>
            <testName>bl_add_memory_under_stress</testName>
            <testID>ESX-BL-001</testID>
            <setupScript>
                <file>SetupScripts\change_memory.ps1</file>
                <file>SetupScripts\enable_hot_memory.ps1</file>
            </setupScript>
            <testScript>testscripts\bl_add_memory_under_stress.ps1</testScript>
            <testParams>
                <param>VMMemory=4GB</param>
                <param>TC_COVERED=RHEL7-50938</param>
            </testParams>
            <RevertDefaultSnapshot>True</RevertDefaultSnapshot>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
        </test>

        <test>
            <testName>bl_add_memory_low_to_high</testName>
            <testID>ESX-BL-002</testID>
            <setupScript>
                <file>SetupScripts\change_memory.ps1</file>
                <file>SetupScripts\enable_hot_memory.ps1</file>
            </setupScript>
            <testScript>testscripts\bl_add_memory_low_to_high.ps1</testScript>
            <testParams>
                <param>VMMemory=8GB</param>
                <param>TC_COVERED=RHEL7-80171</param>
            </testParams>
            <RevertDefaultSnapshot>True</RevertDefaultSnapshot>
            <timeout>400</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
        </test>

        <test>
            <testName>bl_no_vmmemctl_process</testName>
            <testID>ESX-BL-003</testID>
            <testScript>testscripts\bl_no_vmmemctl_process.ps1</testScript>
            <testParams>
                <param>TC_COVERED=RHEL7-50939</param>
            </testParams>
            <RevertDefaultSnapshot>True</RevertDefaultSnapshot>
            <timeout>240</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
        </test>


        <test>
            <testName>stor_add_ide_disk</testName>
            <setupScript>SetupScripts\add_hard_disk.ps1</setupScript>
            <testID>ESX-Stor-011</testID>
            <testScript>testscripts\stor_add_ide_disk.ps1</testScript>
            <files>
                remote-scripts/utils.sh,remote-scripts/stor_add_disk_ide.sh
            </files>
            <cleanupScript>SetupScripts\remove_hard_disk.ps1</cleanupScript>
            <testParams>
                <param>DiskType=IDE</param>
                <param>StorageFormat=Thin</param>
                <param>CapacityGB=10</param>
                <param>TC_COVERED=RHEL7-80182</param>
            </testParams>
            <RevertDefaultSnapshot>True</RevertDefaultSnapshot>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
        </test>
        <test>
            <testName>ovt_snapshot_container</testName>
            <testID>ESX-OVT-033</testID>
            <testScript>testscripts/ovt_snapshot_container.ps1</testScript>
            <files>remote-scripts/utils.sh</files>
            <files>remote-scripts/ovt_docker_install.sh</files>
            <testParams>
                <param>TC_COVERED=RHEL6-51216,RHEL7-135106</param>
            </testParams>
            <RevertDefaultSnapshot>True</RevertDefaultSnapshot>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
        </test>
        <test>
            <testName>ovt_deadlock_condition</testName>
            <testID>ESX-OVT-032</testID>
            <testScript>testscripts/ovt_deadlock_condition.ps1</testScript>
            <files>remote-scripts/utils.sh</files>
            <files>remote-scripts/ovt_check_deadlock.sh</files>
            <files>remote-scripts/ovt_loop.sh</files>
            <testParams>
                <param>TC_COVERED=RHEL6-47886,RHEL7-94309</param>
            </testParams>
            <RevertDefaultSnapshot>True</RevertDefaultSnapshot>
            <timeout>600</timeout>
            <onError>Continue</onError>
            <noReboot>False</noReboot>
        </test>
    </testCases>

    <VMs>
        <vm>
            <hvServer>ESXI_HOST_IPADDRESS</hvServer>
            <vmName>VM_NAME</vmName>
            <os>Linux</os>
            <ipv4/>
            <sshKey>demo_id_rsa.ppk</sshKey>
            <suite>eacv</suite>
        </vm>
    </VMs>

</config>
